<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualisation des DÃ©penses Mensuelles - Chart.js</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; background-color: #f7f7f7; }
        h1, h2 { text-align: center; color: #0056b3; }
        .chart-container {
            width: 90%;
            max-width: 1000px;
            margin: 40px auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <h1>Ã‰volution des DÃ©penses Mensuelles (Mettre telephone mode paysage pourvoir les graphiques)</h1>
    
    <div class="chart-container">
        <h2>1. Total des DÃ©penses RÃ©elles (Graphique en Barres) ðŸ’°</h2>
        <canvas id="graphiqueTotal"></canvas>
    </div>

    <div class="chart-container">
        <h2>2. DÃ©penses par CatÃ©gorie (Graphique en Lignes) ðŸ“Š</h2>
        <canvas id="graphiqueCategories"></canvas>
    </div>

    <script>
        // ====================================================================
        // DONNÃ‰ES JSON (IntÃ©grÃ©es directement)
        // ====================================================================

        // 1. JSON pour la Courbe Principale (Total des DÃ©penses)
        const TOTAL_DEPENSES_MENSUELLES_JSON = [
            {"mois": "AoÃ»t 2024", "total": 171000.00},
            {"mois": "Septembre 2024", "total": 172000.00},
            {"mois": "Octobre 2024", "total": 173500.00},
            {"mois": "Novembre 2024", "total": 177500.00},
            {"mois": "DÃ©cembre 2024", "total": 178950.50},
            {"mois": "Janvier 2025", "total": 178952.00},
            {"mois": "FÃ©vrier 2025", "total": 178000.00},
            {"mois": "Mars 2025", "total": 179450.50},
            {"mois": "Avril 2025", "total": 178729.50},
            {"mois": "Mai 2025", "total": 182100.50},
            {"mois": "Juin 2025", "total": 183951.00},
            {"mois": "Juillet 2025", "total": 184103.50},
            {"mois": "AoÃ»t 2025", "total": 184750.00},
            {"mois": "Septembre 2025", "total": 185365.00},
            {"mois": "Octobre 2025", "total": 185410.00},
            {"mois": "Novembre 2025", "total": 175528.00}
        ];

        // 2. JSON pour les Courbes DÃ©taillÃ©es (DÃ©penses par CatÃ©gorie)
        // CORRECTIONS: Ajout de la virgule manquante ligne 1, correction des fautes de frappe "ABDEILAH" et espaces
        const DEPENSES_PAR_CATEGORIES_JSON = [
            {"mois": "AoÃ»t 2024", "ABDELILAH": 35816.00, "LAAMARTI": 12900.00, "POULET": 19500.00, "POISSON/FRITES": 9200.00, "LÃ‰GUMES": 10200.00, "FRUITS": 10000.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Septembre 2024", "ABDELILAH": 26224.00,"LAAMARTI": 13100.00, "POULET": 19900.00, "POISSON/FRITES": 9300.00, "LÃ‰GUMES": 10300.00, "FRUITS": 10100.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Octobre 2024", "ABDELILAH": 36502.00, "LAAMARTI": 13300.00, "POULET": 20300.00, "POISSON/FRITES": 9400.00, "LÃ‰GUMES": 10400.00, "FRUITS": 10200.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Novembre 2024", "ABDELILAH": 35304.00, "LAAMARTI": 13500.00, "POULET": 20700.00, "POISSON/FRITES": 9500.00, "LÃ‰GUMES": 10500.00, "FRUITS": 10300.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "DÃ©cembre 2024", "ABDELILAH": 39658.00, "LAAMARTI": 13700.00, "POULET": 21100.00, "POISSON/FRITES": 9600.00, "LÃ‰GUMES": 10600.00, "FRUITS": 10400.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Janvier 2025","ABDELILAH": 42171.00, "LAAMARTI": 13900.00, "POULET": 21500.00, "POISSON/FRITES": 9700.00, "LÃ‰GUMES": 10700.00, "FRUITS": 10500.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "FÃ©vrier 2025", "ABDELILAH": 20564.00,"LAAMARTI": 14100.00, "POULET": 21900.00, "POISSON/FRITES": 9800.00, "LÃ‰GUMES": 10800.00, "FRUITS": 10600.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Mars 2025", "ABDELILAH": 18660.00, "LAAMARTI": 14300.00, "POULET": 22300.00, "POISSON/FRITES": 9900.00, "LÃ‰GUMES": 10900.00, "FRUITS": 10700.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Avril 2025", "ABDELILAH": 51371.00,"LAAMARTI": 14500.00, "POULET": 22700.00, "POISSON/FRITES": 10000.00, "LÃ‰GUMES": 11000.00, "FRUITS": 10800.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Mai 2025", "ABDELILAH": 40641.00, "LAAMARTI": 15000.00, "POULET": 23100.00, "POISSON/FRITES": 10100.00, "LÃ‰GUMES": 11200.00, "FRUITS": 11100.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Juin 2025", "ABDELILAH": 41439.00,"LAAMARTI": 15200.00, "POULET": 23500.00, "POISSON/FRITES": 10200.00, "LÃ‰GUMES": 11400.00, "FRUITS": 11300.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Juillet 2025", "ABDELILAH": 47447.00,"LAAMARTI": 15480.00, "POULET": 23990.00, "POISSON/FRITES": 10400.00, "LÃ‰GUMES": 11600.00, "FRUITS": 11500.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "AoÃ»t 2025", "ABDELILAH": 47187.00,"LAAMARTI": 15678.00, "POULET": 24120.00, "POISSON/FRITES": 10500.00, "LÃ‰GUMES": 11800.00, "FRUITS": 11700.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Septembre 2025", "ABDELILAH": 39795.00, "LAAMARTI": 15890.00, "POULET": 24560.00, "POISSON/FRITES": 10540.00, "LÃ‰GUMES": 12010.00, "FRUITS": 11880.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Octobre 2025","ABDELILAH": 49655.00, "LAAMARTI": 15545.00, "POULET": 24987.00, "POISSON/FRITES": 10980.00, "LÃ‰GUMES": 12210.00, "FRUITS": 11980.00, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00},
            {"mois": "Novembre 2025", "ABDELILAH": 32887.00,"LAAMARTI": 16014.50, "POULET": 25385.00, "POISSON/FRITES": 11021.00, "LÃ‰GUMES": 12581.50, "FRUITS": 12110.50, "PERSONNEL": 20000.00, "EMBALLAGES": 7500.00}
        ];


        // ====================================================================
        // LOGIQUE GRAPHIQUE 1 : Total des DÃ©penses (Barres)
        // ====================================================================
        
        function createTotalExpensesChart() {
            const dataJson = TOTAL_DEPENSES_MENSUELLES_JSON;
            const labels = dataJson.map(item => item.mois.replace(' ', '\n')); // Nouvelle ligne pour les mois
            const dataValues = dataJson.map(item => item.total);

            const ctx = document.getElementById('graphiqueTotal').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Total des DÃ©penses (â‚¬/DH)',
                        data: dataValues,
                        backgroundColor: dataValues.map(val => (val === 175528.00 ? 'rgba(255, 99, 132, 0.8)' : 'rgba(75, 192, 192, 0.7)')),
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: { display: true, text: 'Montant (â‚¬/DH)' }
                        },
                        x: {
                             title: { display: true, text: 'Mois' }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Total des DÃ©penses Mensuelles (Mois de Novembre 2025 mis en Ã©vidence)'
                        }
                    }
                }
            });
        }

        // ====================================================================
        // LOGIQUE GRAPHIQUE 2 : DÃ©penses par CatÃ©gorie (Lignes)
        // ====================================================================

        function createCategoryExpensesChart() {
            const categoryJson = DEPENSES_PAR_CATEGORIES_JSON;
            
            // On rÃ©cupÃ¨re toutes les clÃ©s de dÃ©penses (sauf 'mois')
            const categories = Object.keys(categoryJson[0]).filter(key => key !== 'mois');
            const categoryLabels = categoryJson.map(item => item.mois.replace(' ', '\n'));

            // Couleurs pour chaque ligne (Ajout de ABDELILAH)
            const colors = {
                'ABDELILAH': '#007bff', // Bleu vif ajoutÃ©
                'LAAMARTI': '#FF6384', 'POULET': '#FF9F40', 'POISSON/FRITES': '#4BC0C0', 
                'LÃ‰GUMES': '#9966FF', 'FRUITS': '#36A2EB', 'PERSONNEL': '#28a745', 'EMBALLAGES': '#6c757d'
            };

            const datasets = categories.map(cat => ({
                label: cat,
                data: categoryJson.map(item => item[cat]),
                borderColor: colors[cat] || '#000000', // Noir par dÃ©faut si couleur manquante
                backgroundColor: colors[cat] || '#000000',
                fill: false,
                tension: 0.3
            }));

            const ctx2 = document.getElementById('graphiqueCategories').getContext('2d');
            new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: categoryLabels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: { display: true, text: 'Montant (â‚¬/DH)' }
                        },
                        x: {
                            title: { display: true, text: 'Mois' }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Ã‰volution des DÃ©penses par CatÃ©gorie'
                        }
                    }
                }
            });
        }

        // ExÃ©cuter les fonctions de crÃ©ation de graphiques au chargement de la page
        document.addEventListener('DOMContentLoaded', () => {
            createTotalExpensesChart();
            createCategoryExpensesChart();
        });

    </script>
</body>
</html>